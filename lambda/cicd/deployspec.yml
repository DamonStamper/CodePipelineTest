version: 0.2

phases:

  build:
    commands:
      - ls
      - ls ${CODEBUILD_SRC_DIR_build_output} 
      - ZIP=$(ls | grep .zip)
      - aws s3 sync ${CODEBUILD_SRC_DIR_build_output}/$ZIP s3://${BUCKET_NAME} --delete
      # - aws s3 sync ${CODEBUILD_SRC_DIR_build_output}/$ZIP s3://${BUCKET_NAME}/YOUR-S3-KEY --delete
      - aws lambda update-function-code --function-name ${LAMBDA_NAME} --s3-bucket ${BUCKET_NAME}
      # - aws lambda update-function-code --function-name ${LAMBDA_NAME} --s3-bucket ${BUCKET_NAME} --s3-key YOUR-S3-KEY-TO-FILE